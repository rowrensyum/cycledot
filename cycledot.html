<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>recurring_decimal</title>
</head>
<body>
    <input type = "number" id = "son" placeholder="분자" min="1">
    <span>/</span>
    <input type = "number" id = "mom" placeholder="분모" min="1">
    <button id ="submit" type ="button">확인</button>

    <p id="result"></p>


    <script>
       document.getElementById('submit').addEventListener('click',
        function(){

             let son = parseInt(document.getElementById("son").value);
             let mom = parseInt(document.getElementById("mom").value);

             if (!son || !mom || mom === 0) {
             document.getElementById("result").innerText = "분모는 0이 될 수 없습니다!";
             return;
             }
             let a = [];//몫 저장
             let c = [];//나머지 저장
             //소수점
             let tsh2 = son % mom;
             //나머지
             let num = Math.floor(son/mom);
             //몫

             a.push(num);


             while(tsh2 !== 0 && !c.includes(tsh2)){
                 son = tsh2 * 10;
                 num = Math.floor(son/mom);
                 a.push(num);
                 tsh2 = son % mom;
                 c.push(tsh2);
                }
                console.log(a);

             

             let num1 = a[0];
             let num2 = a[1];
             let num3 = a[a.length - 1];

             let suba = a.slice(2,a.length - 2);

             console.log(num1);
             console.log(num2);
             console.log(num3);

             console.log(suba); 

             if (num3 === undefined) {
              console.log("suda는 undefined입니다");
              num3 = " ";
               }

             if (num2 === undefined) {
              console.log("suda는 undefined입니다");
              num2 = "";
               }

             if (suba === undefined) {
              console.log("suda는 undefined입니다");
              suba = " ";
               }
               let last = a.length-1;

              if(c.includes(0)){
                 document.getElementById("result").innerHTML = "<b>"+ num1 + "." + num2 + suba + num3 + "</b>";}
              else if(1==last){
                 document.getElementById("result").innerHTML = "<b>"+ num1 + "." + "<ruby>" + num2 + "<rp>(</rp><rt>•</rt><rp>)</rp></ruby>"+"</b>";
                }
              else{
                document.getElementById("result").innerHTML = "<b>"+ num1 + "." + "<ruby>" + num2 + "<rp>(</rp><rt>•</rt><rp>)</rp></ruby>" + suba + "<ruby>" + num3 + "<rp>(</rp><rt>•</rt><rp>)</rp></ruby>" + "</b>";
              }

        });
    </script>
    
</body>
</html>